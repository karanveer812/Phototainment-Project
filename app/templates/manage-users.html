{% extends 'base.html' %}
{% block title %}Manage User{% endblock %}

{% block page_head %}Manage Users{% endblock %}


{% block navbar %}{% include 'sidebar.html' %}{% endblock %}
{% block content %}
<div class="row d-flex justify-content-end">
    <div class="col-3"><a href="{{ url_for('phototainment.register') }}" class="add-btn btn btn-success my-3">Add New User</a></div>
</div>
<div class="row m-0">
    <div class="table-responsive">
        <table class="table mb-0 table-striped table-hover">
            <thead>
            <tr>
                <th>Id</th>
                <th>User Name</th>
                <th>Role</th>
                <th>Email</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            {% for user in users %}
            {% if not user.id == 1 %}
            <tr>
                <td>{{user.id}}</td>
                <td>{{user.username.title()}}</td>
                <td>{{user.role.role_name}}</td>
                <td>{{user.email}}</td>
                <td><a class="edit-btn"
                       href="{{ url_for('phototainment.edit_user', user_id=user.id) }}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="17.846" height="17.849"
                         viewBox="0 0 17.846 17.849">
                        <path id="edit_baseline"
                              d="M4.5,18.627v3.718H8.217L19.181,11.38,15.464,7.662ZM22.056,8.5a.988.988,0,0,0,0-1.4l-2.32-2.32a.987.987,0,0,0-1.4,0L16.525,6.6l3.717,3.718L22.056,8.5Z"
                              transform="translate(-4.5 -4.496)" fill="#f39800"/>
                    </svg>

                </a>

                    <button class="delete-btn"
                            onclick="deleteUser('{{ url_for('phototainment.delete_user', user_id=user.id) }}')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14.737" height="17.849"
                             viewBox="0 0 14.737 17.849">
                            <path id="delete_baseline"
                                  d="M8.553,20.366a2.053,2.053,0,0,0,2.105,1.983h8.421a2.053,2.053,0,0,0,2.105-1.983V8.466H8.553ZM22.237,5.492H18.553L17.5,4.5H12.237l-1.053.992H7.5V7.475H22.237Z"
                                  transform="translate(-7.5 -4.5)" fill="#f39800"/>
                        </svg>

                    </button>
                    <button class="reset-user delete-btn" onclick="deleteUser('{{ url_for('phototainment.reset_user', user_id=user.id) }}')">
                    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="undo" class="svg-inline--fa fa-undo fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#FFA101" d="M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"></path></svg></button>
                </td>
            </tr>
            {% endif %}
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}

{% block custom_scripts %}
<script>
        function deleteUser(redirect) {
            var txt;
            var isAdd = confirm("Do you want to delete the selected user?");
            if (isAdd == true) {
                window.location.href = redirect;
            }
        }
        function editUser(redirect) {
            window.location.href = redirect;
        }


        function resetUser(redirect) {
            var txt;
            var isAdd = confirm("Do you want to reset password the selected user?");
            if (isAdd == true) {
                window.location.href = redirect;
            }
        }



</script>
{% endblock %}